(this.webpackJsonpprojektinhallinta=this.webpackJsonpprojektinhallinta||[]).push([[0],{101:function(e,a,t){},102:function(e,a,t){},108:function(e,a,t){},109:function(e,a,t){},206:function(e,a,t){},207:function(e,a,t){},208:function(e,a,t){},209:function(e,a,t){},210:function(e,a,t){},211:function(e,a,t){},212:function(e,a,t){},213:function(e,a,t){},214:function(e,a,t){},215:function(e,a,t){},216:function(e,a,t){},217:function(e,a,t){},218:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(22),c=t.n(r),i=(t(101),t(42)),o=t(43),s=t(7),m=t(47),u=t(48),d=t(16),p=t(15),v=(t(102),t(33));t(103),t(106);v.initializeApp({apiKey:"AIzaSyDYg8rRcyKKCuquF7OUC7GII7j6J90aF0s",authDomain:"projektori-9688c.firebaseapp.com",databaseURL:"https://projektori-9688c.firebaseio.com",projectId:"projektori-9688c",storageBucket:"projektori-9688c.appspot.com",messagingSenderId:"366865871111",appId:"1:366865871111:web:94b659a4c991e3077455a2",measurementId:"G-7WDH3S5CVN"});var E=new v.auth.GoogleAuthProvider,h=v.auth(),j=v;t(108);var y=function(e){return l.a.createElement("div",{className:"header"},l.a.createElement("div",null,l.a.createElement("h1",null,"Projektori"),l.a.createElement("div",{className:"ulos"},l.a.createElement("button",{onClick:e.onLogout},l.a.createElement("label",null,"Kirjaudu ulos")," "))))},f=t(85),b=t.n(f),k=t(89),_=t.n(k),N=t(90),g=t.n(N),D=t(91),C=t.n(D);t(109);var w=function(e){return l.a.createElement("div",{className:"menu",color:"action"},l.a.createElement(d.b,{to:"/"},l.a.createElement("div",{className:"menu__nappi"},l.a.createElement(b.a,{color:"action"}))),l.a.createElement(d.b,{to:"/stats"},l.a.createElement("div",{className:"menu__nappi"},l.a.createElement(_.a,{color:"action"}))),l.a.createElement(d.b,{to:"/done"},l.a.createElement("div",{className:"menu__nappi"},l.a.createElement(g.a,{color:"action"}))),l.a.createElement(d.b,{to:"/add"},l.a.createElement("div",{className:"menu__nappi"},l.a.createElement(C.a,{color:"action"}))))},F=t(62);t(206);var S=function(e){return l.a.createElement("div",{className:"content"},e.children)};t(207);var O=function(e){var a=e.data.reduce((function(e,a){var t=e.findIndex((function(e){return e.tyyppi===a.tyyppi}));return t>=0?e[t].summa=e[t].summa+a.summa:e.push({tyyppi:a.tyyppi,summa:a.summa}),e}),[]);console.log(a);var t={labels:a.map((function(e){return e.tyyppi})),datasets:[{type:"bar",data:a.map((function(e){return e.summa})),label:" ",responsive:!0,maintainAspectRatio:!1,backgroundColor:["#9AF376","#76D8F3","#DDCF78"]}]},n=e.data.filter((function(e){return e.valmiusaste<="90"})),r=n.length,c={labels:n.map((function(e){return e.loppupvm+", "+e.kuvaus.slice(0,10)})),datasets:[{label:"Yhteens\xe4 keskener\xe4isi\xe4 "+r,type:"bar",data:n.map((function(e){return e.valmiusaste})),responsive:!0,maintainAspectRatio:!1,backgroundColor:["#9AF376","#76D8F3","#DDCF78","#7FFFD4","#5F9EA0","#00BFFF","#00008B","#ADD8E6"]}]};return l.a.createElement(S,null,l.a.createElement("h2",null," Budjetointikooste "),l.a.createElement("div",{className:"stats__graph"},l.a.createElement(F.a,{data:t,options:{responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),l.a.createElement("h2",null," P\xe4\xe4tymisp\xe4iv\xe4, valmiina %"),l.a.createElement("div",{className:"stats__graph"},l.a.createElement(F.a,{data:c,options2:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{type:"time",time:{displayFormats:{day:"D.M.Y"}}}]}}})))},P=t(12),I=t.n(P),A=(t(208),t(235));var x=function(e){var a=I()(e.data.alkupvm),t=I()(e.data.loppupvm);return l.a.createElement("div",{className:"projectcard",key:e.data.id},l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",{className:"projectcard__tyyppi"},e.data.tyyppi)),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("h4",null,"Aloitettu"),l.a.createElement("div",{className:"projectcard__alkupvm"},a.format("D.M.Y"))),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("h4",null,"P\xe4\xe4ttyy"),l.a.createElement("div",{className:"projectcard__loppupvm"},t.format("D.M.Y"))),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("h4",null,"Budjetti "),l.a.createElement("div",{className:"projectcard__budjetti"},e.data.budjetti)),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("h4",null,"Kuvaus "),l.a.createElement("div",{className:"projectcard__row"},e.data.kuvaus)),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("h4",null,"Valmis % "),l.a.createElement("div",{className:"projectcard__row"},e.data.valmiusaste)),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(d.b,{to:"/edit/"+e.data.id},l.a.createElement("label",null,"Muokkaa")," ")," ")),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("label",null," ",l.a.createElement(A.a,{inputProps:{"aria-label":"primary checkbox with small size"}}),"Keskeytetty "))))};var L=function(e){var a=e.data.map((function(e){return l.a.createElement(x,{data:e,key:e.id})}));return l.a.createElement(S,null,a)},M=t(46),K=t(93),V=t(94),J=(t(209),function(e){var a,t=e.className,n=void 0===t?"":t,r=e.primary,c=e.secondary,i=Object(V.a)(e,["className","primary","secondary"]);return l.a.createElement("button",Object.assign({type:"button",className:(a=["button",n,r?"button--primary":"",c?"button--secondary":""],a.join(" "))},i))}),B=t(236),Y=(t(210),function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;Object(i.a)(this,t),n=a.call(this,e);var l=e.data?e.data:{id:"",tyyppi:"J\xe4rjestelm\xe4n jatkokehitys",alkupvm:"",loppupvm:"",kuvaus:"",budjetti:"Kyll\xe4",summa:"0",valmiusaste:"",valmis:""};return n.state={data:l},n.handleInputChange=n.handleInputChange.bind(Object(s.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(s.a)(n)),n.handleCancel=n.handleCancel.bind(Object(s.a)(n)),n.handleDeleteProject=n.handleDeleteProject.bind(Object(s.a)(n)),n}return Object(o.a)(t,[{key:"handleInputChange",value:function(e){var a=e.target;console.log(e.target.type),e.target.type;var t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState({data:Object(K.a)({},this.state.data,Object(M.a)({},n,t))})}},{key:"handleSubmit",value:function(e){e.preventDefault();var a=Object.assign({},this.state.data);a.summa=parseFloat(a.summa),a.id=a.id?a.id:Object(B.a)(),this.props.onFormSubmit(a),this.props.history.push("/")}},{key:"handleCancel",value:function(e){e.preventDefault(),this.props.history.goBack()}},{key:"handleDeleteProject",value:function(e){e.preventDefault(),this.props.onDeleteProject(this.state.data.id),this.props.history.push("/")}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.handleSubmit,key:this.state.data.id},l.a.createElement("div",{className:"projectform"},l.a.createElement("div",null),l.a.createElement("div",{className:"projectform__row"},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"name"},"Valitse tyyppi "),l.a.createElement("select",{type:"text",name:"tyyppi",value:this.state.data.tyyppi,onChange:this.handleInputChange},l.a.createElement("option",{value:"J\xe4rjestelm\xe4n jatkokehitys"},"J\xe4rjestelm\xe4n jatkokehitys"),l.a.createElement("option",{value:"Prosessin kehitys"},"Prosessin kehitys"),l.a.createElement("option",{value:"Uusi j\xe4rjestelm\xe4"},"Uusi j\xe4rjestelm\xe4")))),l.a.createElement("div",{className:"projectform__row"},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"alkupvm"},"Aloitusp\xe4iv\xe4 2 "),l.a.createElement("div",{className:"info__user"},"Jos projekti on jo aloitettu, valitse alkuper\xe4inen aloitusp\xe4iv\xe4m\xe4\xe4r\xe4."),l.a.createElement("input",{type:"date",name:"alkupvm",value:this.state.data.alkupvm,onChange:this.handleInputChange,size:"10"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"loppupvm"},"P\xe4\xe4ttymisp\xe4iv\xe4 "),l.a.createElement("div",{className:"info__user"},"Valitse arvioitu p\xe4\xe4ttymisp\xe4iv\xe4, jos sit\xe4 ei ole m\xe4\xe4ritelty."),"   ",l.a.createElement("input",{type:"date",name:"loppupvm",value:this.state.data.loppupvm,onChange:this.handleInputChange,size:"10"}))),l.a.createElement("div",{className:"projectform__row"},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"kuvaus"},"Projektin lis\xe4tiedot "),l.a.createElement("input",{placeholder:"Kirjoita j\xe4rjestelm\xe4n nimi alkuun, jos projekti liittyy sellaiseen.",type:"text",name:"kuvaus",size:"40",value:this.state.data.kuvaus,onChange:this.handleInputChange}))),l.a.createElement("div",{className:"projectform__row"},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"budjetti"},"Budjetoitu "),l.a.createElement("div",{className:"info__user"},'Valitse "Kyll\xe4" vain siin\xe4 tapauksessa, ett\xe4 budjetti on jo hyv\xe4ksytty.'),l.a.createElement("div",null,l.a.createElement("select",{name:"budjetti",value:this.state.data.budjetti,onChange:this.handleInputChange},l.a.createElement("option",{value:"Kyll\xe4"},"Kyll\xe4"),l.a.createElement("option",{value:"Ei"},"Ei")),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"summa"},"Summa"),l.a.createElement("input",{type:"number",name:"summa",size:"8",value:this.state.data.summa,onChange:this.handleInputChange}))))),l.a.createElement("div",{className:"projectform__row"},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"name"},"Valmiusaste (prosenttia) "),l.a.createElement("select",{type:"text",name:"valmiusaste",value:this.state.data.valmiusaste,onChange:this.handleInputChange},l.a.createElement("option",{value:""}),l.a.createElement("option",{value:"10"},"10"),l.a.createElement("option",{value:"20"},"20"),l.a.createElement("option",{value:"30"},"30"),l.a.createElement("option",{value:"40"},"40"),l.a.createElement("option",{value:"50"},"50"),l.a.createElement("option",{value:"60"},"60"),l.a.createElement("option",{value:"70"},"70"),l.a.createElement("option",{value:"80"},"80"),l.a.createElement("option",{value:"90"},"90"),l.a.createElement("option",{value:"Valmis"},"Valmis"))),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"valmis"},"Valmis pvm "),l.a.createElement("input",{type:"date",name:"valmis",value:this.state.data.valmis,onChange:this.handleInputChange}))),l.a.createElement("div",null,l.a.createElement(J,{type:"submit",primary:!0},this.state.data.id?"Tallenna":"Lis\xe4\xe4"," "),l.a.createElement(J,{onClick:this.handleCancel,secondary:!0},"Peruuta"),this.props.onDeleteProject?l.a.createElement(J,{onClick:this.handleDeleteProject},"Poista"):"")))}}]),t}(l.a.Component)),R=Object(p.e)(Y);t(211);var z=function(e){return l.a.createElement(S,null,l.a.createElement("h2",null," Sy\xf6t\xe4 projektin tai kehitysteht\xe4v\xe4n tiedot "),l.a.createElement(R,{onFormSubmit:e.onFormSubmit}))};t(212);var U=function(e){var a=e.data.findIndex((function(a){return a.id===e.match.params.id})),t=e.data[a];return l.a.createElement(S,null,l.a.createElement("div",{className:"editproject"},l.a.createElement("h2",null," Muokkaa projektin tietoja "),l.a.createElement("p",null,"Match:",a),l.a.createElement(R,{onFormSubmit:e.onFormSubmit,data:t,onDeleteProject:e.onDeleteProject})))};var W=function(e){var a=I()(e.data.loppupvm),t=I()(e.data.alkupvm),n=I()(e.data.valmis);return l.a.createElement("div",null,l.a.createElement("div",{className:"projectcard",key:e.data.id}),l.a.createElement("div",{className:"projectcard__tyyppi"},e.data.tyyppi),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",null,"Aloitettu"),l.a.createElement("div",{className:"projectcard__alkupvm"},t.format("D.M.Y"))),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",null,"P\xe4\xe4ttyy"),l.a.createElement("div",{className:"projectcard__loppupvm"},a.format("D.M.Y"))),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",null,"Kuvaus "),l.a.createElement("div",{className:"projectcard__row"},e.data.kuvaus)),l.a.createElement("div",{className:"projectcard__row"},e.data.valmiusaste),l.a.createElement("div",{className:"projectcard__row"},n.format("D.M.Y")))};t(213);var G=function(e){var a=e.data.filter((function(e){return"Valmis"===e.valmiusaste})),t=a.length,n=a.map((function(e){return l.a.createElement(W,{data:e,key:e.id})}));return l.a.createElement(S,null,l.a.createElement("div",{className:"otsikko3"},l.a.createElement("div",{className:"otsikko3__teksti"},l.a.createElement("div",null,l.a.createElement("h4",null," Valmiit")," ",l.a.createElement("h5",null,"M\xe4\xe4r\xe4: ",t)))),n)};t(214),t(215);var T=function(e){var a=I()(e.data.loppupvm);return l.a.createElement("div",null,l.a.createElement("div",{className:"projectcard",key:e.data.id}),l.a.createElement("div",{className:"projectcard__tyyppi"},e.data.tyyppi),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",{className:"projectcard__valmiusaste"},e.data.valmiusaste," % ")),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",null,"P\xe4\xe4ttyy "),l.a.createElement("div",{className:"projectcard__loppupvm"},a.format("D.M.Y"))),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",{className:"projectcard__kuvaus"},e.data.kuvaus)))};var Z=function(e){var a=e.data.filter((function(e){return e.valmiusaste<="50"})),t=a.length,n=a.map((function(e){return l.a.createElement(T,{data:e,key:e.id,luku:t})}));return l.a.createElement(S,null,l.a.createElement("div",{className:"otsikko"},l.a.createElement("h4",null,"Valmiina alle puolet"),l.a.createElement("h5",null,"M\xe4\xe4r\xe4: ",t)),n)};t(216);var q=function(e){var a=I()(e.data.loppupvm);return l.a.createElement("div",null,l.a.createElement("div",{className:"projectcard",key:e.data.id}),l.a.createElement("div",{className:"projectcard__tyyppi"},e.data.tyyppi),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",{className:"projectcard__valmiusaste"},e.data.valmiusaste," % ")),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",null,"P\xe4\xe4ttyy "),l.a.createElement("div",{className:"projectcard__loppupvm"},a.format("D.M.Y"))),l.a.createElement("div",{className:"projectcard__row"},l.a.createElement("div",{className:"projectcard__kuvaus"},e.data.kuvaus)))};t(217);var H=function(e){var a=e.data.filter((function(e){return e.valmiusaste>"50"&&e.valmiusaste<="90"})),t=a.length,n=a.map((function(e){return l.a.createElement(q,{data:e,key:e.id})}));return l.a.createElement(S,null,l.a.createElement("div",{className:"otsikko2"},l.a.createElement("h4",null,"Valmiina yli puolet")," ",l.a.createElement("h5",null,"M\xe4\xe4r\xe4: ",t)),n)},$=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).state={data:[],user:null},n.dbRef=j.firestore(),n.handleFormSubmit=n.handleFormSubmit.bind(Object(s.a)(n)),n.handleDeleteProject=n.handleDeleteProject.bind(Object(s.a)(n)),n.login=n.login.bind(Object(s.a)(n)),n.logout=n.logout.bind(Object(s.a)(n)),n.handleList4=n.handleList4.bind(Object(s.a)(n)),n.handleList2=n.handleList2.bind(Object(s.a)(n)),n.handleList3=n.handleList3.bind(Object(s.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.onAuthStateChanged((function(a){a&&(e.setState({user:a}),e.refData=e.dbRef.collection("users").doc(a.uid).collection("data"),e.unsubscribe=e.refData.orderBy("loppupvm").onSnapshot((function(a){var t=[];a.forEach((function(e){var a=e.data();t.push(a)})),e.setState({data:t})})))}))}},{key:"handleFormSubmit",value:function(e){this.refData.doc(e.id).set(e)}},{key:"handleList4",value:function(){var e=this.state.data.slice();e.sort((function(e,a){return e.budjetti<a.budjetti?-1:e.budjetti>a.budjetti?1:0})),this.setState({data:e})}},{key:"handleDeleteProject",value:function(e){this.refData.doc(e).delete().then().catch((function(e){console.error("Virhe poistettaessa projektia",+e)}))}},{key:"handleList2",value:function(){var e=this.state.data.slice();e.sort((function(e,a){return e.kuvaus<a.kuvaus?-1:e.kuvaus>a.kuvaus?1:0})),this.setState({data:e})}},{key:"handleList3",value:function(){var e=this.state.data.slice();e.sort((function(e,a){return e.valmiusaste<a.valmiusaste?-1:e.valmiusaste>a.valmiusaste?1:0})),this.setState({data:e})}},{key:"login",value:function(){var e=this;h.signInWithPopup(E).then((function(a){var t=a.user;e.setState({user:t,error:null})})).catch((function(a){var t=a.message;e.setState({error:t})}))}},{key:"logout",value:function(){var e=this;this.unsubscribe(),h.signOut().then((function(){e.setState({user:null}),e.refData=null}))}},{key:"render",value:function(){var e=this;return this.state.user?l.a.createElement(d.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(p.a,{path:"/",render:function(){return l.a.createElement(y,{onLogout:e.logout})}}),l.a.createElement("div",{className:"Nappi"},l.a.createElement(p.a,{path:"/",exact:!0,render:function(){return l.a.createElement("button",{onClick:e.handleList3,secondary:toString()}," J\xe4rjest\xe4: valmiina 0% -100% ")}}),l.a.createElement(p.a,{path:"/",exact:!0,render:function(){return l.a.createElement("button",{onClick:e.handleList2,secondary:toString()},"J\xe4rjest\xe4: Kuvauksen mukaan ")}}),l.a.createElement(p.a,{path:"/",exact:!0,render:function(){return l.a.createElement("button",{onClick:e.handleList4,secondary:toString()},"J\xe4rjest\xe4: Projektit, joilla ei budjettia ")}})),l.a.createElement(p.a,{path:"/stats",render:function(){return l.a.createElement(O,{data:e.state.data})}}),l.a.createElement(p.a,{path:"/",exact:!0,render:function(){return l.a.createElement(L,{data:e.state.data})}}),l.a.createElement(p.a,{path:"/done",render:function(){return l.a.createElement(Z,{data:e.state.data})}}),l.a.createElement(p.a,{path:"/done",render:function(){return l.a.createElement(H,{data:e.state.data})}}),l.a.createElement(p.a,{path:"/done",render:function(a){return l.a.createElement(G,Object.assign({data:e.state.data},a))}}),l.a.createElement(p.a,{path:"/add",render:function(){return l.a.createElement(z,{onFormSubmit:e.handleFormSubmit})}}),l.a.createElement(p.a,{path:"/edit/:id",render:function(a){return l.a.createElement(U,Object.assign({data:e.state.data,onFormSubmit:e.handleFormSubmit,onDeleteProject:e.handleDeleteProject},a))}}),l.a.createElement(w,null))):l.a.createElement(d.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(S,null,l.a.createElement("div",{className:"app_welcome"},l.a.createElement("div",{className:"app_name"},l.a.createElement("h1",null,"PROJEKTORI")),l.a.createElement("p",null,"Et ole kirjautunut sis\xe4lle"),l.a.createElement("p",null,l.a.createElement(J,{primary:!0,onClick:this.login},"Kirjaudu t\xe4st\xe4")),this.state.error?l.a.createElement("p",null,this.state.error):null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},96:function(e,a,t){e.exports=t(218)}},[[96,1,2]]]);
//# sourceMappingURL=main.e247f057.chunk.js.map